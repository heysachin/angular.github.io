{"version":3,"sources":["webpack:///webpack/bootstrap 0a8b101f02aaa0804c9e?4797","webpack:///./src/ui-scroll-grid.js"],"names":["angular","module","directive","console","$timeout","GridAdapter","controller","getLayout","applyLayout","layout","columnFromPoint","x","y","Object","defineProperty","get","getColumns","ColumnAdapter","column","css","attr","arguments","value","length","header","forEachRow","row","id","moveBefore","index","exchangeWith","ColumnController","columns","mapTo","extend","applyCss","target","moveLast","insidePoint","result","element","offset","left","outerWidth","top","outerHeight","detach","before","parent","append","removeAttr","hasOwnProperty","GridController","scrollViewport","rowMap","Map","adapter","publicContext","gridAdapter","transform","scope","item","registerColumn","push","registerCell","cell","set","unregisterCell","i","indexOf","splice","delete","callback","forEach","slice","sort","a","b","layouts","Error","map","selected","columnId","next","c","find","col","undefined","visible","require","restrict","link","$scope","$attr","controllers","gridController","$on"],"mappings":"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","file":"ui-scroll-grid.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0a8b101f02aaa0804c9e","angular.module('ui.scroll.grid', [])\n  .directive('uiScrollTh', ['$log', '$timeout', function (console, $timeout) {\n\n    function GridAdapter(controller) {\n\n      this.getLayout = () => controller.getLayout();\n\n      this.applyLayout = (layout) => controller.applyLayout(layout);\n\n      this.columnFromPoint = (x, y) => controller.columnFromPoint(x, y);\n\n      Object.defineProperty(this, 'columns', {get: () => controller.getColumns()});\n    }\n\n    function ColumnAdapter(controller, column) {\n\n      this.css = function (/* attr, value */) {\n        var attr = arguments[0];\n        var value = arguments[1];\n        if (arguments.length == 1) {\n          return column.header.css(attr);\n        }\n        if (arguments.length == 2) {\n          column.header.css(attr, value);\n          controller.forEachRow((row) => row[column.id].css(attr, value));\n          column.css[attr] = value;\n        }\n      };\n\n      this.moveBefore = (index) => controller.moveBefore(column, index);\n\n      this.exchangeWith = (index) => controller.exchangeWith(column, index);\n\n      Object.defineProperty(this, 'columnId', {get: () => column.id});\n    }\n\n    function ColumnController(controller, columns, header) {\n\n      this.header = header;\n      this.css = {};\n      this.mapTo = columns.length;\n      this.id = columns.length;\n\n      // controller api methods\n\n      this.applyLayout = function (layout) {\n        this.css = angular.extend({}, layout.css);\n        this.mapTo = layout.mapTo;\n        applyCss(this.header, this.css);\n      };\n\n      this.moveBefore = function (target) {\n        if (target) {\n          moveBefore(header, target.header);\n          controller.forEachRow((row) => moveBefore(row[this.id], row[target.id]));\n        } else {\n          moveLast(header);\n          controller.forEachRow((row) => moveLast(row[this.id]));\n        }\n      };\n\n      this.columnFromPoint = function (x, y) {\n        if (insidePoint(header, x, y)) {\n          return this;\n        }\n        let result = null;\n        controller.forEachRow((row) =>\n          result = insidePoint(row[this.id], x, y) ? this : result\n        );\n        return result;\n      };\n\n      this.applyCss = function (target) {\n        applyCss(target, this.css);\n      };\n\n      // function definitions\n\n      function insidePoint(element, x, y) {\n        let offset = element.offset();\n        if (x < offset.left || offset.left + element.outerWidth(true) < x)\n          return false;\n        if (y < offset.top || offset.top + element.outerHeight(true) < y)\n          return false;\n        return true;\n      }\n\n      function moveBefore(element, target) {\n        element.detach();\n        target.before(element);\n      }\n\n      function moveLast(element) {\n        let parent = element.parent();\n        element.detach();\n        parent.append(element);\n      }\n\n      function applyCss(target, css) {\n        target.removeAttr('style');\n        for (let attr in css) {\n          if (css.hasOwnProperty(attr)) {\n            target.css(attr, css[attr]);\n          }\n        }\n      }\n\n    }\n\n    function GridController(scrollViewport) {\n      let columns = [];\n      let rowMap = new Map();\n\n      $timeout(() => {\n        scrollViewport.adapter.publicContext.gridAdapter = new GridAdapter(this);\n        scrollViewport.adapter.transform = (scope, item) => transform(rowMap.get(scope), item);\n      });\n\n      this.registerColumn = function (header) {\n        columns.push(new ColumnController(this, columns, header));\n      };\n\n      this.registerCell = function (scope, cell) {\n        let row = rowMap.get(scope);\n        if (!row) {\n          row = [];\n          rowMap.set(scope, row);\n        }\n        if (row.length >= columns.length) {\n          return false;\n        }\n        row.push(cell);\n        return true;\n      };\n\n      this.unregisterCell = function (scope, cell) {\n        let row = rowMap.get(scope);\n        let i = row.indexOf(cell);\n        row.splice(i, 1);\n        if (!row.length) {\n          rowMap.delete(scope);\n        }\n      };\n\n      this.forEachRow = function (callback) {\n        rowMap.forEach(callback);\n      };\n\n      this.getColumns = function () {\n        let result = [];\n        columns.slice()\n          .sort((a, b) => a.mapTo - b.mapTo)\n          .forEach((column) => result.push(new ColumnAdapter(this, column)));\n        return result;\n      };\n\n      this.getLayout = function () {\n        let result = [];\n        columns.forEach((column, index) => result.push({\n            index: index,\n            css: angular.extend({}, column.css),\n            mapTo: column.mapTo\n          })\n        );\n        return result;\n      };\n\n      this.applyLayout = function (layouts) {\n        if (!layouts || layouts.length != columns.length) {\n          throw new Error('Failed to apply layout - number of layouts should match number of columns');\n        }\n        layouts.forEach((layout, index) => columns[index].applyLayout(layout));\n        transform(columns.map((column) => column.header));\n        rowMap.forEach((row) => transform(row));\n      };\n\n      this.moveBefore = function (selected, target) {\n        let index = target;\n\n        if (target % 1 !== 0) {\n          index = target ? columns[target.columnId].mapTo : columns.length;\n        }\n        if (index < 0 || index > columns.length) {\n          return; // throw an error?\n        }\n\n        let mapTo = selected.mapTo, next = null;\n        index -= mapTo < index ? 1 : 0;\n\n        columns.forEach(c => {\n          c.mapTo -= c.mapTo > mapTo ? 1 : 0;\n          c.mapTo += c.mapTo >= index ? 1 : 0;\n          next = c.mapTo === index + 1 ? c : next;\n        });\n\n        selected.mapTo = index;\n        selected.moveBefore(next);\n      };\n\n      this.exchangeWith = function (selected, index) {\n        if (index < 0 || index >= columns.length) {\n          return;\n        }\n        columns.find(c => c.mapTo === index).mapTo = selected.mapTo;\n        selected.mapTo = index;\n      };\n\n      this.columnFromPoint = function (x, y) {\n        let column = columns.find(col => col.columnFromPoint(x, y));\n        return column ? new ColumnAdapter(this, column) : undefined;\n      };\n\n      // function definitions\n\n      function transform(row) {\n        let parent = row[0].parent();\n        let visible = [];\n\n        row.forEach((cell, index) => {\n          columns[index].applyCss(cell);\n          visible[columns[index].mapTo] = row[index];\n          row[index].detach();\n        });\n\n        visible.forEach(cell => parent.append(cell));\n      }\n\n    }\n\n    return {\n      require: ['^^uiScrollViewport'],\n      restrict: 'A',\n      link: ($scope, element, $attr, controllers) => {\n        controllers[0].gridController = controllers[0].gridController || new GridController(controllers[0]);\n        controllers[0].gridController.registerColumn(element);\n      }\n    };\n  }])\n\n  .directive('uiScrollTd', function () {\n    return {\n      require: ['?^^uiScrollViewport'],\n      restrict: 'A',\n      link: ($scope, element, $attr, controllers) => {\n        if (controllers[0]) {\n          let gridController = controllers[0].gridController;\n          if (gridController.registerCell($scope, element)) {\n            $scope.$on('$destroy', () => gridController.unregisterCell($scope, element));\n          }\n        }\n      }\n    };\n  });\n\n\n// WEBPACK FOOTER //\n// ./src/ui-scroll-grid.js"],"sourceRoot":""}